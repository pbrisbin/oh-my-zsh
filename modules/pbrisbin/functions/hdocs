#
# Generate and publish haddocks for local haskell sources
#
# Authors:
#   Patrick Brisbin <pbrisbin@gmail.com>
#

(( $+commands[cabal] )) || return 1

local public="$HOME/Code/haskell/devsite/static/docs/haskell"
local   name="${PWD##*/}"

cabal haddock \
  --html-location='http://hackage.haskell.org/packages/archive/$pkg/latest/doc/html' \
  --hyperlink-source "$@" || return 1

rm -rf "$public/$name"
cp -r "./dist/doc/html/$name" "$public/$name"
